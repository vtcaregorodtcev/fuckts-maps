{"version":3,"sources":["_reducers/index.js","_reducers/app.js","_helpers/store.js","_helpers/history.js","components/Fuckt/index.js","pages/Pov/style.js","pages/Pov/index.js","routes.js","App.js","serviceWorker.js","index.js"],"names":["combineReducers","app","state","arguments","length","undefined","loggerMiddleware","createLogger","pushMiddleware","routerMiddleware","history","store","createStore","rootReducer","applyMiddleware","thunkMiddleware","createHashHistory","Fuckt","props","fuckt","onFucktChange","onCloseClick","react_default","a","createElement","className","autoFocus","value","text","onChange","_ref","target","icon","type","onClick","Pov_style","layout","background","content","wrapper","padding","div","minHeight","height","borderRadius","position","draggable","display","Content","Layout","Sider","confirm","Modal","CreateFuckt","Input","Search","ID_SEQUENCE","Menu","SubMenu","newFuckt","options","Object","objectSpread","id","Date","now","defaultFuckts","defaultPosition","x","y","PovPage","fuckts","fucktValue","collapsed","currentMapIndex","onCollapse","console","log","_this","setState","_this2","this","_this$state","saveMapModalIsVisible","mapSaveName","successTextAlert","allFucktMaps","style","collapsible","menu","theme","selectedKeys","concat","mode","Item","key","goToNew","triggerSaveMap","map","fm","idx","goToMap","mapSaveNameFormatted","name","triggerDeleteMap","placeholder","enterButton","size","handleUpdateFucktValue","onSearch","handleCreateFuckt","f","react_draggable_default","bounds","handle","onStart","e","handleUpdateFucktCoordsFromStart","onStop","handleUpdateFucktCoords","zIndex","opacity","deleted","pointerEvents","handleClickDragFuckt","val","handleCahngeFuckt","handleCloseFuckt","modal","title","visible","onOk","handleSaveMapOk","onCancel","toggleSaveMap","okText","cancelText","input","_ref2","es_alert","message","showIcon","afterClose","replace","push","findIndex","Math","max","apply","movedFuckt","currentTarget","node","findDOMNode","_nodeTransform$replac","transform","split","_nodeTransform$replac2","slicedToArray","pos","_this3","_this$props$match","match","_this$props$match$par","params","pov","fucktsMap","JSON","parse","localStorage","getItem","okType","storedNames","nameIdx","indexOf","splice","setItem","stringify","_this$props$match2","_this$props$match2$pa","_this4","_this$state2","_this$state2$mapSaveN","setTimeout","prevState","_props$match","_props$match$params","React","Component","routes","Switch","Route","path","component","Redirect","from","to","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","listen","location","action","Router","connect","Boolean","window","hostname","ReactDOM","render","es","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"kWAMeA,kBAAgB,CAC7BC,ICPa,WAAiC,IAApBC,EAAoBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAZ,GAClC,OAD8CA,UAAAC,OAAA,GAAAD,UAAA,GACvCD,KCWHI,EAAmBC,yBACnBC,EAAiBC,2BAAiBC,GAE3BC,EAAQC,YAAYC,EAAaC,YAAgBC,IAAiBP,EAAgBF,YCXlFI,EAAUM,uICCR,SAASC,EAAMC,GAAO,IAC5BC,EAAsCD,EAAtCC,MAAOC,EAA+BF,EAA/BE,cAAeC,EAAgBH,EAAhBG,aAE7B,OAAQC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACrBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACfH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACbH,EAAAC,EAAAC,cAAA,YACEE,WAAS,EACTC,MAAOR,EAAMS,KACbC,SAAU,SAAAC,GAAA,IAAaH,EAAbG,EAAGC,OAAUJ,MAAb,OAA2BP,EAAcO,EAAOR,OAG9DG,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CAAMP,UAAU,eAAeQ,KAAK,QAAQC,QAAS,kBAAMb,EAAaF,OCjB7D,IAAAgB,EAAA,CACbC,OAAQ,CACNC,WAAY,WAEdC,QAAS,CACPC,QAAS,CACPC,QAAS,gBAEXC,IAAK,CACHD,QAAS,GACTE,UAAW,IACXC,OAAQ,qBACRC,aAAc,MACdP,WAAY,UACZQ,SAAU,aAGdC,UAAW,CACTP,QAAS,CACPQ,QAAS,eACTF,SAAU,cCHTG,EAAkBC,IAAlBD,QAASE,EAASD,IAATC,MACVC,EAAUC,IAAMD,QAChBE,EAAcC,IAAMC,OAKtBC,GAJYC,IAAKC,QAIH,GAMZC,EAAW,SAAC/B,GAAD,IAAOgC,EAAPzD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAiB,GAAjB,OAAA0D,OAAAC,EAAA,EAAAD,CAAA,GACZD,EADY,CAEfhC,OACAmC,GAAIC,KAAKC,MAAQT,OAGbU,EAAgB,CACpBP,EAAS,8EAAmB,CAC1BQ,gBAAiB,CAACC,EAAG,IAAKC,EAAG,MAE/BV,EAAS,4KAAsC,CAC7CQ,gBAAiB,CAACC,EAAG,IAAKC,EAAG,OAE/BV,EAAS,uLAAuC,CAC9CQ,gBAAiB,CAACC,EAAG,IAAKC,EAAG,OAE/BV,EAAS,oKAAmC,CAC1CQ,gBAAiB,CAACC,EAAG,IAAKC,EAAG,QAuVlBC,6MAlVbpE,MAAQ,CACNqE,OAAQL,EACRM,WAAY,GACZC,WAAW,EACXC,gBAAiB,KAGnBC,WAAa,SAACF,GACZG,QAAQC,IAAIJ,GACZK,EAAKC,SAAS,CAAEN,uFAyDT,IAAAO,EAAAC,KAAAC,EAUHD,KAAK/E,MARPqE,EAFKW,EAELX,OACAC,EAHKU,EAGLV,WACAC,EAJKS,EAILT,UACAU,EALKD,EAKLC,sBACAC,EANKF,EAMLE,YACAC,EAPKH,EAOLG,iBACAC,EARKJ,EAQLI,aACAZ,EATKQ,EASLR,gBAGF,OAAQpD,EAAAC,EAAAC,cAACY,EAAA,EAAD,CAAQX,UAAU,kBAAkB8D,MAAOA,EAAMnD,QACvDd,EAAAC,EAAAC,cAAC0B,EAAD,CACEsC,aAAW,EACXf,UAAWA,EACXE,WAAYM,KAAKN,YACjBrD,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACfH,EAAAC,EAAAC,cAACiE,EAAA,EAAD,CAAMC,MAAM,OAAOC,aAAc,IAAAC,OAAIlB,IAAoBmB,KAAK,UAC5DvE,EAAAC,EAAAC,cAACiE,EAAA,EAAKK,KAAN,CAAWC,IAAI,IAAI7D,QAAS,kBAAM8C,EAAKgB,YACrC1E,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CAAMC,KAAK,SACXX,EAAAC,EAAAC,cAAA,8EAEFF,EAAAC,EAAAC,cAACiE,EAAA,EAAKK,KAAN,CAAWC,IAAI,IAAI7D,QAAS,kBAAM8C,EAAKiB,mBACrC3E,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CAAMC,KAAK,SACXX,EAAAC,EAAAC,cAAA,sGAGA8D,EAAaY,IAAI,SAACC,EAAIC,GAAL,OACf9E,EAAAC,EAAAC,cAACiE,EAAA,EAAKK,KAAN,CAAWC,IAAKK,EAAI,EAAGlE,QAAS,kBAAM8C,EAAKqB,QAAQF,EAAGG,qBAAsBF,EAAI,KAC9E9E,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CAAMC,KAAK,SACXX,EAAAC,EAAAC,cAAA,YAAO2E,EAAGI,SAIhBjF,EAAAC,EAAAC,cAACiE,EAAA,EAAKK,KAAN,CAAWC,IAAI,OAAO7D,QAAS,kBAAM8C,EAAKwB,qBACxClF,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CAAMC,KAAK,WACXX,EAAAC,EAAAC,cAAA,4FAINF,EAAAC,EAAAC,cAACwB,EAAD,CAASuC,MAAOA,EAAMjD,QAAQC,SAC5BjB,EAAAC,EAAAC,cAAC6B,EAAD,CACE5B,UAAU,yBACVgF,YAAY,mFACZC,YAAY,mDAAWC,KAAK,QAC5BhF,MAAO6C,EACP3C,SAAU,SAAAC,GAAA,IAAaH,EAAbG,EAAGC,OAAUJ,MAAb,OAA2BqD,EAAK4B,uBAAuBjF,IACjEkF,SAAU,SAAA1F,GAAK,OAAI6D,EAAK8B,kBAAkB3F,MAE5CG,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBAAiB8D,MAAOA,EAAMjD,QAAQG,KAEjD8B,EAAO2B,IAAI,SAACa,EAAGX,GAAJ,OACT9E,EAAAC,EAAAC,cAACwF,EAAAzF,EAAD,CAAWwE,IAAKgB,EAAEhD,GAChBkD,OAAO,kBACPC,OAAO,qBACP/C,gBAAiB4C,EAAE5C,gBACnBgD,QAAS,SAAAC,GAAC,OAAIpC,EAAKqC,iCAAiCD,IACpDE,OAAQ,SAAAF,GAAC,OAAIpC,EAAKuC,wBAAwBH,EAAGL,KAE7CzF,EAAAC,EAAAC,cAAA,OACE+D,MAAK1B,OAAAC,EAAA,EAAAD,CAAA,GACA0B,EAAMzC,UAAUP,QADhB,CAEHiF,OAAQT,EAAES,OACVC,QAASV,EAAEW,QAAU,EAAI,EACzBC,cAAeZ,EAAEW,QAAU,OAAS,SAEtCxF,QAAS,kBAAM8C,EAAK4C,qBAAqBb,KAEzCzF,EAAAC,EAAAC,cAACP,EAAD,CACEE,MAAO4F,EACP3F,cAAe,SAACyG,EAAK1G,GAAN,OAAgB6D,EAAK8C,kBAAkBD,EAAK1G,IAC3DE,aAAc,SAAAF,GAAK,OAAI6D,EAAK+C,iBAAiB5G,YAOzDG,EAAAC,EAAAC,cAACwG,EAAA,EAAD,CACEC,MAAM,wHACNC,QAAS/C,EACTgD,KAAM,kBAAMnD,EAAKoD,mBACjBC,SAAU,kBAAMrD,EAAKsD,iBACrBC,OAAO,wCACPC,WAAW,+EAEXlH,EAAAC,EAAAC,cAACiH,EAAA,EAAD,CACEhC,YAAY,4EACZ9E,MAAOyD,EACPvD,SAAU,SAAA6G,GAAA,IAAoBtD,EAApBsD,EAAG3G,OAAUJ,MAAb,OAAwCqD,EAAKD,SAAS,iBAAO,CAACK,qBAI1EC,GACA/D,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACmH,EAAA,EAAD,CACIC,QAASvD,EACTpD,KAAK,UACL4G,UAAQ,EACRC,WAAY,kBAAM9D,EAAKD,SAAS,iBAAO,CAACM,iBAAkB,6CAQpEJ,KAAKF,SAAS,iBAAO,CAACR,OAAQL,EAAeQ,gBAAiB,KAE9DhE,EAAQqI,QAAR,+CAGMxC,EAAMH,GACZnB,KAAKF,SAAS,iBAAO,CAACL,gBAAiB0B,KAEvC1F,EAAQqI,QAAR,WAAAnD,OAA2BW,mDAGN5E,GACrBsD,KAAKF,SAAS,iBAAO,CAACP,WAAY7C,+CAGlBR,GAAO,IAChBoD,EAAUU,KAAK/E,MAAfqE,OAGPA,EAAOyE,KAAKrF,EAASxC,IAErB8D,KAAKF,SAAS,iBAAO,CAACR,SAAQC,WAJX,gDAOH7C,EAAOR,GAAO,IACvBoD,EAAUU,KAAK/E,MAAfqE,OAED6B,EAAM7B,EAAO0E,UAAU,SAAAlC,GAAC,OAAIA,EAAEhD,KAAO5C,EAAM4C,KACjDQ,EAAO6B,GAAKxE,KAAOD,EAEnBsD,KAAKF,SAAS,iBAAO,CAACR,qDAGPpD,GAAO,IACfoD,EAAUU,KAAK/E,MAAfqE,OAED6B,EAAM7B,EAAO0E,UAAU,SAAAlC,GAAC,OAAIA,EAAEhD,KAAO5C,EAAM4C,KAEjDQ,EAAO6B,GAAKsB,SAAU,EAEtBzC,KAAKF,SAAS,iBAAO,CAACR,yDAGHpD,GAAO,IACnBoD,EAAUU,KAAK/E,MAAfqE,OAED6B,EAAM7B,EAAO0E,UAAU,SAAAlC,GAAC,OAAIA,EAAEhD,KAAO5C,EAAM4C,KAEjDQ,EAAO6B,GAAKoB,OAAS0B,KAAKC,IAAIC,MAAM,KAAM7E,EAAO2B,IAAI,SAAAa,GAAC,OAAIA,EAAES,QAAU,KAAM,EAE5EvC,KAAKF,SAAS,iBAAO,CAACR,qEAGS6C,GAC/BnC,KAAKoE,WAAajC,EAAEkC,8DAGElC,EAAGjG,GACzB,IAAMoI,EAAOC,sBAAYvE,KAAKoE,YAE9B,GAAKE,EAAL,CAEA,IALgCE,EAKVF,EAAKhE,MAAMmE,UAG9BX,QAAQ,aAAc,IACtBA,QAAQ,IAAK,IACbA,QAAQ,MAAO,IACfA,QAAQ,KAAM,IACdY,MAAM,KAZuBC,EAAA/F,OAAAgG,EAAA,EAAAhG,CAAA4F,EAAA,GAOzBrF,EAPyBwF,EAAA,GAOtBvF,EAPsBuF,EAAA,GAczBrF,EAAUU,KAAK/E,MAAfqE,OACD6B,EAAM7B,EAAO0E,UAAU,SAAAlC,GAAC,OAAIA,EAAEhD,KAAO5C,EAAM4C,KACjDQ,EAAO6B,GAAK0D,IAAM,CAAC1F,GAAIA,EAAGC,GAAIA,GAE9BY,KAAKF,SAAS,iBAAO,CAACR,wDAGL,IAAAwF,EAAA9E,KAAA+E,EAC0B/E,KAAK/D,MAAzC+I,MADUC,GAAAF,OAAA,IAAAA,EACoB,GADpBA,GACFG,OAASC,GADPF,OAAA,IAAAA,EACc,GADdA,GACOE,IAGxB,GAAY,QAARA,EAAe,CACjB,IAAMC,EAAYC,KAAKC,MACrBC,aAAaC,QAAb,GAAA7E,OA1Rc,kBA0RdA,OAAwCwE,KAAU,MAGpDjH,EAAQ,CACN8E,MAAK,mHAAArC,OAA2ByE,EAAU9D,KAArC,MACLjE,QAAS,iMACTiG,OAAQ,+CACRmC,OAAQ,SACRlC,WAAY,oCACZL,KANM,WAOJ,IAAMwC,EAAcL,KAAKC,MACvBC,aAAaC,QAtSD,oBAsS6B,MAGrCG,EAAUD,EAAYE,QAAQT,GACpCO,EAAYG,OAAOF,EAAS,GAE5BJ,aAAaO,QA5SC,kBA4SwBT,KAAKU,UAAUL,IACrDH,aAAaO,QAAb,GAAAnF,OA5SY,kBA4SZA,OAAwCwE,GAAO,IAtBjCL,EAAK/D,uDA8BV,IAAAiF,EAC4BhG,KAAK/D,MAAzC+I,MADQiB,GAAAD,OAAA,IAAAA,EACsB,GADtBA,GACAd,OAASC,GADTc,OAAA,IAAAA,EACgB,GADhBA,GACSd,IAExB,GAAY,QAARA,EACF,OAAOnF,KAAKmD,gBAAgBgC,GAG9BnF,KAAKF,SAAS,iBAAO,CAACI,uBAAuB,6CAG/B,IACPA,EAAyBF,KAAK/E,MAA9BiF,sBAEPF,KAAKF,SAAS,iBAAO,CAACI,uBAAwBA,6CAGhCiF,GAAK,IAAAe,EAAAlG,KAAAmG,EACiBnG,KAAK/E,MADtBmL,EAAAD,EACZhG,mBADY,IAAAiG,EACEjB,EADFiB,EACO9G,EADP6G,EACO7G,OACpB+B,EAAuBlB,EAAY2D,QAAQ,MAAO,KAElD4B,EAAcL,KAAKC,MACvBC,aAAaC,QA1UK,oBA0UuB,OAGQ,IAA/CE,EAAYE,QAAQvE,IACtBqE,EAAY3B,KAAK1C,GAGnBkE,aAAaO,QAjVO,kBAiVkBT,KAAKU,UAAUL,IAErDH,aAAaO,QAAb,GAAAnF,OAlVkB,kBAkVlBA,OACqBU,GACnBgE,KAAKU,UAAU,CACbjH,GAAIC,KAAKC,MAAQT,IACjB+C,KAAMnB,EACNkB,uBACA/B,YAIJU,KAAKF,SAAS,iBAAO,CACnBK,iBAAa/E,EACb8E,uBAAuB,EACvBE,iBAAkB,2FAGpBiG,WAAW,kBAAMH,EAAKpG,SAAS,iBAAO,CAACM,iBAAkB,OAxWtC,KA0Wd+E,GACH1J,EAAQqI,QAAR,WAAAnD,OAA2BU,uDAjUCpF,EAAOqK,GAAW,IAAAC,EACLtK,EAApC+I,MADyCwB,GAAAD,OAAA,IAAAA,EACX,GADWA,GACjCrB,OAASC,GADwBqB,OAAA,IAAAA,EACjB,GADiBA,GACxBrB,IAExB,GAAImB,EAAUpG,sBACZ,OAAO,KAGT,IAIMG,EAJcgF,KAAKC,MACvBC,aAAaC,QA7CK,oBA6CuB,MAGVvE,IAAI,SAAAK,GACnC,OAAO+D,KAAKC,MACVC,aAAaC,QAAb,GAAA7E,OAjDc,kBAiDdA,OAAwCW,KAAW,QAIvD,GAAY,QAAR6D,GAAmC,QAAlBmB,EAAUnB,IAC7B,MAAO,CACLA,MACA7F,OAAQL,EAAcgC,IAAI,SAAAa,GAGxB,OAFAA,EAAEhD,GAAKC,KAAKC,MAAQT,IAEbuD,IAETzB,gBAIJ,GAAIiG,EAAUnB,MAAQA,EAAK,CACzB,IAAMC,EAAYC,KAAKC,MACrBC,aAAaC,QAAb,GAAA7E,OAnEc,kBAmEdA,OAAwCwE,KAAU,MAG7C7F,EAAU8F,EAAV9F,OACDG,EAAkBY,EAAa2D,UAAU,SAAA9C,GAAE,OAAIA,EAAGpC,KAAOsG,EAAUtG,KAAM,EAE/E,MAAO,CACLqG,MACA9E,eACAZ,kBACAH,OAAQA,GAAUA,EAAOnE,OACrBmE,EAAO2B,IAAI,SAAAa,GAGT,OAFAA,EAAE5C,gBAAkB4C,EAAE+C,IAEf/C,IAET,IAIR,OAAO,YAhEW2E,IAAMC,WC9CdC,EAAA,kBAAOtK,EAAAC,EAAAC,cAACqK,EAAA,EAAD,KACnBvK,EAAAC,EAAAC,cAACsK,EAAA,EAAD,CAAOC,KAAK,eAAeC,UAAW1H,IACtChD,EAAAC,EAAAC,cAACyK,EAAA,EAAD,CAAUC,KAAK,IAAIC,GAAG,gBACtB7K,EAAAC,EAAAC,cAACyK,EAAA,EAAD,CAAUC,KAAK,IAAIC,GAAG,QCAlBC,cACJ,SAAAA,EAAYlL,GAAO,IAAA4D,EAAA,OAAAjB,OAAAwI,EAAA,EAAAxI,CAAAoB,KAAAmH,GACjBtH,EAAAjB,OAAAyI,EAAA,EAAAzI,CAAAoB,KAAApB,OAAA0I,EAAA,EAAA1I,CAAAuI,GAAAI,KAAAvH,KAAM/D,IAENR,EAAQ+L,OAAO,SAACC,EAAUC,GACxB/H,QAAQC,IAAI6H,KAJG5H,wEASjB,OAAQxD,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACrBH,EAAAC,EAAAC,cAACoL,EAAA,EAAD,CAAQlM,QAASA,GACfY,EAAAC,EAAAC,cAACoK,EAAD,eAZUD,aAkBHkB,gBAAUT,GCdLU,QACW,cAA7BC,OAAOL,SAASM,UAEe,UAA7BD,OAAOL,SAASM,UAEhBD,OAAOL,SAASM,SAAS/C,MACvB,2DCTNgD,IAASC,OAAO5L,EAAAC,EAAAC,cAAC2L,EAAA,EAAD,CAAUxM,MAAOA,GAC/BW,EAAAC,EAAAC,cAAC4L,EAAD,OACWC,SAASC,eAAe,SDsH/B,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.f4a46e8b.chunk.js","sourcesContent":["import {\n  combineReducers\n} from 'redux';\n\nimport app from './app';\n\nexport default combineReducers({\n  app\n});\n","export default function app(state = {}, action) {\n  return state;\n}\n","import {createStore, applyMiddleware} from 'redux';\n\nimport thunkMiddleware from 'redux-thunk';\n\nimport {routerMiddleware} from 'react-router-redux';\n\nimport {createLogger} from 'redux-logger';\n\nimport rootReducer from '_reducers';\n\nimport {history} from '_helpers';\n\nconst loggerMiddleware = createLogger();\nconst pushMiddleware = routerMiddleware(history);\n\nexport const store = createStore(rootReducer, applyMiddleware(thunkMiddleware, pushMiddleware, loggerMiddleware));\n","import {\n  createHashHistory\n} from 'history';\n\nexport const history = createHashHistory();\n","import React from 'react';\nimport {Icon} from 'antd';\n\nimport './style.css';\n\nexport default function Fuckt(props) {\n  const {fuckt, onFucktChange, onCloseClick} = props;\n\n  return (<div className=\"paper\">\n    <div className=\"paper__drag-place\"></div>\n    <div className=\"paper-content\">\n      <textarea\n        autoFocus\n        value={fuckt.text}\n        onChange={({ target: { value } }) => onFucktChange(value, fuckt)}>\n      </textarea>\n    </div>\n    <Icon className=\"paper__close\" type=\"close\" onClick={() => onCloseClick(fuckt)} />\n  </div>)\n}\n","export default {\n  layout: {\n    background: '#E5F7FF'\n  },\n  content: {\n    wrapper: {\n      padding: '5px 5px 10px',\n    },\n    div: {\n      padding: 10,\n      minHeight: 280,\n      height: 'calc(100vh - 60px)',\n      borderRadius: '3px',\n      background: '#E5F7FF',\n      position: 'relative'\n    }\n  },\n  draggable: {\n    wrapper: {\n      display: 'inline-block',\n      position: 'absolute'\n    }\n  }\n};\n","import React from 'react';\nimport {findDOMNode} from 'react-dom';\nimport Draggable from 'react-draggable';\n\nimport {\n  Layout,\n  Menu,\n  Icon,\n  Input,\n  Modal,\n  Alert\n} from 'antd';\n\nimport {Fuckt} from 'components';\nimport style from './style';\nimport {history} from '_helpers';\n\nconst {Content, Sider} = Layout;\nconst confirm = Modal.confirm;\nconst CreateFuckt = Input.Search;\nconst SubMenu = Menu.SubMenu;\n\nconst ALERT_DURATION = 5000;\n\nlet ID_SEQUENCE = 1;\nlet Z_INDEX_COUNTER = 1;\n\nconst FUCKT_MAP_NAMES = 'FUCKT_MAP_NAMES';\nconst FUCKT_MAP_KEY = 'FUCKT_MAP_KEY_';\n\nconst newFuckt = (text, options = {}) => ({\n  ...options,\n  text,\n  id: Date.now() + ID_SEQUENCE++\n});\n\nconst defaultFuckts = [\n  newFuckt('Кликни на меня!', {\n    defaultPosition: {x: 400, y: 70}\n  }),\n  newFuckt('Привет, добавь пару фактов о себе!', {\n    defaultPosition: {x: 100, y: 100}\n  }),\n  newFuckt('Ты можешь двигать нас как захочешь!', {\n    defaultPosition: {x: 305, y: 130}\n  }),\n  newFuckt('Потяни мышкой за край листочка!', {\n    defaultPosition: {x: 150, y: 225}\n  })\n];\n\nclass PovPage extends React.Component {\n  state = {\n    fuckts: defaultFuckts,\n    fucktValue: '',\n    collapsed: true,\n    currentMapIndex: 1\n  };\n\n  onCollapse = (collapsed) => {\n    console.log(collapsed);\n    this.setState({ collapsed });\n  }\n\n  static getDerivedStateFromProps(props, prevState) {\n    const {match: {params: {pov} = {}} = {}} = props;\n\n    if (prevState.saveMapModalIsVisible) {\n      return null;\n    }\n\n    const storedNames = JSON.parse(\n      localStorage.getItem(FUCKT_MAP_NAMES) || '[]'\n    );\n\n    const allFucktMaps = storedNames.map(name => {\n      return JSON.parse(\n        localStorage.getItem(`${FUCKT_MAP_KEY}${name}`) || '{}'\n      );\n    });\n\n    if (pov === 'new' && prevState.pov !== 'new') {\n      return {\n        pov,\n        fuckts: defaultFuckts.map(f => {\n          f.id = Date.now() + ID_SEQUENCE++;\n\n          return f;\n        }),\n        allFucktMaps\n      };\n    }\n\n    if (prevState.pov !== pov) {\n      const fucktsMap = JSON.parse(\n        localStorage.getItem(`${FUCKT_MAP_KEY}${pov}`) || '{}'\n      );\n\n      const {fuckts} = fucktsMap;\n      const currentMapIndex = allFucktMaps.findIndex(fm => fm.id === fucktsMap.id) + 3;\n\n      return {\n        pov,\n        allFucktMaps,\n        currentMapIndex,\n        fuckts: fuckts && fuckts.length\n          ? fuckts.map(f => {\n              f.defaultPosition = f.pos;\n\n              return f;\n            })\n          : []\n      };\n    }\n\n    return null;\n  }\n\n  render() {\n    const {\n      fuckts,\n      fucktValue,\n      collapsed,\n      saveMapModalIsVisible,\n      mapSaveName,\n      successTextAlert,\n      allFucktMaps,\n      currentMapIndex\n    } = this.state;\n\n    return (<Layout className=\"layout pov-page\" style={style.layout}>\n      <Sider\n        collapsible\n        collapsed={collapsed}\n        onCollapse={this.onCollapse}>\n        <div className=\"logo\"/>\n        <Menu theme=\"dark\" selectedKeys={[`${currentMapIndex}`]} mode=\"inline\">\n          <Menu.Item key=\"1\" onClick={() => this.goToNew()}>\n            <Icon type=\"file\" />\n            <span>Новая карта</span>\n          </Menu.Item>\n          <Menu.Item key=\"2\" onClick={() => this.triggerSaveMap()}>\n            <Icon type=\"save\"/>\n            <span>Сохранить карту</span>\n          </Menu.Item>\n          {\n            allFucktMaps.map((fm, idx) => (\n              <Menu.Item key={idx+3} onClick={() => this.goToMap(fm.mapSaveNameFormatted, idx+3)}>\n                <Icon type=\"copy\"/>\n                <span>{fm.name}</span>\n              </Menu.Item>\n            ))\n          }\n          <Menu.Item key=\"1000\" onClick={() => this.triggerDeleteMap()}>\n            <Icon type=\"delete\" />\n            <span>Удалить карту</span>\n          </Menu.Item>\n        </Menu>\n      </Sider>\n      <Content style={style.content.wrapper}>\n        <CreateFuckt\n          className=\"pov-page__create-input\"\n          placeholder=\"Введи свой факт\"\n          enterButton=\"Добавить\" size=\"large\"\n          value={fucktValue}\n          onChange={({ target: { value } }) => this.handleUpdateFucktValue(value)}\n          onSearch={fuckt => this.handleCreateFuckt(fuckt)}\n        />\n        <div className=\"draggable-area\" style={style.content.div}>\n          {\n            fuckts.map((f, idx) => (\n              <Draggable key={f.id}\n                bounds='.draggable-area'\n                handle=\".paper__drag-place\"\n                defaultPosition={f.defaultPosition}\n                onStart={e => this.handleUpdateFucktCoordsFromStart(e)}\n                onStop={e => this.handleUpdateFucktCoords(e, f)}\n              >\n                <div\n                  style={{\n                    ...style.draggable.wrapper,\n                    zIndex: f.zIndex,\n                    opacity: f.deleted ? 0 : 1,\n                    pointerEvents: f.deleted ? 'none' : 'auto'\n                  }}\n                  onClick={() => this.handleClickDragFuckt(f)}\n                >\n                  <Fuckt\n                    fuckt={f}\n                    onFucktChange={(val, fuckt) => this.handleCahngeFuckt(val, fuckt)}\n                    onCloseClick={fuckt => this.handleCloseFuckt(fuckt)}\n                  />\n                </div>\n             </Draggable>))\n          }\n        </div>\n      </Content>\n        <Modal\n          title=\"Назови свою факт-карту\"\n          visible={saveMapModalIsVisible}\n          onOk={() => this.handleSaveMapOk()}\n          onCancel={() => this.toggleSaveMap()}\n          okText=\"Вот так\"\n          cancelText=\"Потом, отстань!\"\n        >\n          <Input\n            placeholder=\"Название сюда\"\n            value={mapSaveName}\n            onChange={({ target: { value: mapSaveName } }) => this.setState(() => ({mapSaveName}))}\n          />\n        </Modal>\n        {\n          successTextAlert &&\n          <div>\n          <Alert\n              message={successTextAlert}\n              type=\"success\"\n              showIcon\n              afterClose={() => this.setState(() => ({successTextAlert: ''}))}\n            />\n          </div>\n        }\n    </Layout>);\n  }\n\n  goToNew() {\n    this.setState(() => ({fuckts: defaultFuckts, currentMapIndex: 1}));\n\n    history.replace(`/fuckts/new`);\n  }\n\n  goToMap(name, idx) {\n    this.setState(() => ({currentMapIndex: idx}));\n\n    history.replace(`/fuckts/${name}`)\n  }\n\n  handleUpdateFucktValue(value) {\n    this.setState(() => ({fucktValue: value}));\n  }\n\n  handleCreateFuckt(fuckt) {\n    const {fuckts} = this.state;\n    const fucktValue = '';\n\n    fuckts.push(newFuckt(fuckt));\n\n    this.setState(() => ({fuckts, fucktValue}));\n  }\n\n  handleCahngeFuckt(value, fuckt) {\n    const {fuckts} = this.state;\n\n    const idx = fuckts.findIndex(f => f.id === fuckt.id);\n    fuckts[idx].text = value;\n\n    this.setState(() => ({fuckts}));\n  }\n\n  handleCloseFuckt(fuckt) {\n    const {fuckts} = this.state;\n\n    const idx = fuckts.findIndex(f => f.id === fuckt.id);\n\n    fuckts[idx].deleted = true;\n\n    this.setState(() => ({fuckts}));\n  }\n\n  handleClickDragFuckt(fuckt) {\n    const {fuckts} = this.state;\n\n    const idx = fuckts.findIndex(f => f.id === fuckt.id);\n\n    fuckts[idx].zIndex = Math.max.apply(null, fuckts.map(f => f.zIndex || 0)) + 1;\n\n    this.setState(() => ({fuckts}));\n  }\n\n  handleUpdateFucktCoordsFromStart(e) {\n    this.movedFuckt = e.currentTarget;\n  }\n\n  handleUpdateFucktCoords(e, fuckt) {\n    const node = findDOMNode(this.movedFuckt);\n\n    if (!node) return;\n\n    const nodeTransform = node.style.transform;\n\n    const [x, y] = nodeTransform\n      .replace('translate(', '')\n      .replace(')', '')\n      .replace('px,', '')\n      .replace('px', '')\n      .split(' ');\n\n    const {fuckts} = this.state;\n    const idx = fuckts.findIndex(f => f.id === fuckt.id);\n    fuckts[idx].pos = {x: +x, y: +y};\n\n    this.setState(() => ({fuckts}));\n  }\n\n  triggerDeleteMap() {\n    const {match: {params: {pov} = {}} = {}} = this.props;\n    const toNew = () => this.goToNew();\n\n    if (pov !== 'new') {\n      const fucktsMap = JSON.parse(\n        localStorage.getItem(`${FUCKT_MAP_KEY}${pov}`) || '{}'\n      );\n\n      confirm({\n        title: `Хочешь удалить карту '${fucktsMap.name}'?`,\n        content: 'Её больше нельзя будет восстановить',\n        okText: 'Да, давай',\n        okType: 'danger',\n        cancelText: 'Ой, нет!',\n        onOk() {\n          const storedNames = JSON.parse(\n            localStorage.getItem(FUCKT_MAP_NAMES) || '[]'\n          );\n\n          const nameIdx = storedNames.indexOf(pov);\n          storedNames.splice(nameIdx, 1);\n\n          localStorage.setItem(FUCKT_MAP_NAMES, JSON.stringify(storedNames));\n          localStorage.setItem(`${FUCKT_MAP_KEY}${pov}`, '');\n\n          toNew();\n        }\n      });\n    }\n  }\n\n  triggerSaveMap() {\n    const {match: {params: {pov} = {}} = {}} = this.props;\n\n    if (pov !== 'new') {\n      return this.handleSaveMapOk(pov);\n    }\n\n    this.setState(() => ({saveMapModalIsVisible: true}))\n  }\n\n  toggleSaveMap() {\n    const {saveMapModalIsVisible} = this.state;\n\n    this.setState(() => ({saveMapModalIsVisible: !saveMapModalIsVisible}))\n  }\n\n  handleSaveMapOk(pov) {\n    const {mapSaveName = pov, fuckts} = this.state;\n    const mapSaveNameFormatted = mapSaveName.replace(/\\s/g, '_');\n\n    const storedNames = JSON.parse(\n      localStorage.getItem(FUCKT_MAP_NAMES) || '[]'\n    );\n\n    if (storedNames.indexOf(mapSaveNameFormatted) === -1) {\n      storedNames.push(mapSaveNameFormatted);\n    }\n\n    localStorage.setItem(FUCKT_MAP_NAMES, JSON.stringify(storedNames));\n\n    localStorage.setItem(\n      `${FUCKT_MAP_KEY}${mapSaveNameFormatted}`,\n      JSON.stringify({\n        id: Date.now() + ID_SEQUENCE++,\n        name: mapSaveName,\n        mapSaveNameFormatted,\n        fuckts\n      })\n    );\n\n    this.setState(() => ({\n      mapSaveName: undefined,\n      saveMapModalIsVisible: false,\n      successTextAlert: 'Карта сохранена'\n    }));\n\n    setTimeout(() => this.setState(() => ({successTextAlert: ''})), ALERT_DURATION);\n\n    if (!pov) {\n      history.replace(`/fuckts/${mapSaveNameFormatted}`);\n    }\n  }\n}\n\nexport default PovPage;\n","import React from 'react';\nimport {Route, Switch, Redirect} from 'react-router-dom';\n\nimport {PovPage} from 'pages';\n\nexport default() => (<Switch>\n  <Route path=\"/fuckts/:pov\" component={PovPage}/>\n  <Redirect from='/' to='/fuckts/new'/>\n  <Redirect from='*' to='/'/>\n</Switch>);\n","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport {Router} from 'react-router-dom';\nimport './App.css';\n\nimport {history} from '_helpers';\nimport Routes from './routes';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    history.listen((location, action) => {\n      console.log(location)\n    });\n  }\n\n  render() {\n    return (<div className=\"app\">\n      <Router history={history}>\n        <Routes/>\n      </Router>\n    </div>);\n  }\n}\n\nexport default connect()(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport \"antd/dist/antd.css\";\nimport './index.css';\nimport App from './App';\nimport {Provider} from 'react-redux';\nimport {store} from '_helpers';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Provider store={store}>\n  <App/>\n</Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}