(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,a){e.exports=a(193)},126:function(e,t,a){},131:function(e,t,a){},134:function(e,t,a){},193:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(3),o=a.n(c),l=(a(125),a(126),a(54)),u=a(55),i=a(66),s=a(57),p=a(65),d=a(63),f=a(200),m=(a(131),a(33)),v=a(104),k=a(105),h=a(106);var g=Object(m.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments.length>1&&arguments[1],e}}),S=Object(h.createLogger)(),y=Object(k.routerMiddleware)(C),E=Object(m.d)(g,Object(m.a)(v.a,y,S)),M=a(43),C=Object(M.a)(),b=a(201),F=a(202),x=a(198),O=a(116),I=a(85),_=a(107),N=a.n(_),w=a(197),T=a(196),j=a(195),A=a(194),P=a(8),K=a(199);a(134);function U(e){var t=e.fuckt,a=e.onFucktChange,n=e.onCloseClick;return r.a.createElement("div",{className:"paper"},r.a.createElement("div",{className:"paper__drag-place"}),r.a.createElement("div",{className:"paper-content"},r.a.createElement("textarea",{autoFocus:!0,value:t.text,onChange:function(e){var n=e.target.value;return a(n,t)}})),r.a.createElement(P.a,{className:"paper__close",type:"close",onClick:function(){return n(t)}}))}var V={layout:{background:"#E5F7FF"},content:{wrapper:{padding:"5px 5px 10px"},div:{padding:10,minHeight:280,height:"calc(100vh - 60px)",borderRadius:"3px",background:"#E5F7FF",position:"relative"}},draggable:{wrapper:{display:"inline-block",position:"absolute"}}},J=w.a.Content,D=w.a.Sider,z=T.a.confirm,Y=j.a.Search,B=(A.a.SubMenu,1),W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(I.a)({},t,{text:e,id:Date.now()+B++})},H=[W("\u041a\u043b\u0438\u043a\u043d\u0438 \u043d\u0430 \u043c\u0435\u043d\u044f!",{defaultPosition:{x:400,y:70}}),W("\u041f\u0440\u0438\u0432\u0435\u0442, \u0434\u043e\u0431\u0430\u0432\u044c \u043f\u0430\u0440\u0443 \u0444\u0430\u043a\u0442\u043e\u0432 \u043e \u0441\u0435\u0431\u0435!",{defaultPosition:{x:100,y:100}}),W("\u0422\u044b \u043c\u043e\u0436\u0435\u0448\u044c \u0434\u0432\u0438\u0433\u0430\u0442\u044c \u043d\u0430\u0441 \u043a\u0430\u043a \u0437\u0430\u0445\u043e\u0447\u0435\u0448\u044c!",{defaultPosition:{x:305,y:130}}),W("\u041f\u043e\u0442\u044f\u043d\u0438 \u043c\u044b\u0448\u043a\u043e\u0439 \u0437\u0430 \u043a\u0440\u0430\u0439 \u043b\u0438\u0441\u0442\u043e\u0447\u043a\u0430!",{defaultPosition:{x:150,y:225}})],L=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={fuckts:H,fucktValue:"",collapsed:!0,currentMapIndex:1},a.onCollapse=function(e){console.log(e),a.setState({collapsed:e})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.fuckts,n=t.fucktValue,c=t.collapsed,o=t.saveMapModalIsVisible,l=t.mapSaveName,u=t.successTextAlert,i=t.allFucktMaps,s=t.currentMapIndex;return r.a.createElement(w.a,{className:"layout pov-page",style:V.layout},r.a.createElement(D,{collapsible:!0,collapsed:c,onCollapse:this.onCollapse},r.a.createElement("div",{className:"logo"}),r.a.createElement(A.a,{theme:"dark",selectedKeys:["".concat(s)],mode:"inline"},r.a.createElement(A.a.Item,{key:"1",onClick:function(){return e.goToNew()}},r.a.createElement(P.a,{type:"file"}),r.a.createElement("span",null,"\u041d\u043e\u0432\u0430\u044f \u043a\u0430\u0440\u0442\u0430")),r.a.createElement(A.a.Item,{key:"2",onClick:function(){return e.triggerSaveMap()}},r.a.createElement(P.a,{type:"save"}),r.a.createElement("span",null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443")),i.map(function(t,a){return r.a.createElement(A.a.Item,{key:a+3,onClick:function(){return e.goToMap(t.mapSaveNameFormatted,a+3)}},r.a.createElement(P.a,{type:"copy"}),r.a.createElement("span",null,t.name))}),r.a.createElement(A.a.Item,{key:"1000",onClick:function(){return e.triggerDeleteMap()}},r.a.createElement(P.a,{type:"delete"}),r.a.createElement("span",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443")))),r.a.createElement(J,{style:V.content.wrapper},r.a.createElement(Y,{className:"pov-page__create-input",placeholder:"\u0412\u0432\u0435\u0434\u0438 \u0441\u0432\u043e\u0439 \u0444\u0430\u043a\u0442",enterButton:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",size:"large",value:n,onChange:function(t){var a=t.target.value;return e.handleUpdateFucktValue(a)},onSearch:function(t){return e.handleCreateFuckt(t)}}),r.a.createElement("div",{className:"draggable-area",style:V.content.div},a.map(function(t,a){return r.a.createElement(N.a,{key:t.id,bounds:".draggable-area",handle:".paper__drag-place",defaultPosition:t.defaultPosition,onStart:function(t){return e.handleUpdateFucktCoordsFromStart(t)},onStop:function(a){return e.handleUpdateFucktCoords(a,t)}},r.a.createElement("div",{style:Object(I.a)({},V.draggable.wrapper,{zIndex:t.zIndex,opacity:t.deleted?0:1,pointerEvents:t.deleted?"none":"auto"}),onClick:function(){return e.handleClickDragFuckt(t)}},r.a.createElement(U,{fuckt:t,onFucktChange:function(t,a){return e.handleCahngeFuckt(t,a)},onCloseClick:function(t){return e.handleCloseFuckt(t)}})))}))),r.a.createElement(T.a,{title:"\u041d\u0430\u0437\u043e\u0432\u0438 \u0441\u0432\u043e\u044e \u0444\u0430\u043a\u0442-\u043a\u0430\u0440\u0442\u0443",visible:o,onOk:function(){return e.handleSaveMapOk()},onCancel:function(){return e.toggleSaveMap()},okText:"\u0412\u043e\u0442 \u0442\u0430\u043a",cancelText:"\u041f\u043e\u0442\u043e\u043c, \u043e\u0442\u0441\u0442\u0430\u043d\u044c!"},r.a.createElement(j.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u044e\u0434\u0430",value:l,onChange:function(t){var a=t.target.value;return e.setState(function(){return{mapSaveName:a}})}})),u&&r.a.createElement("div",null,r.a.createElement(K.a,{message:u,type:"success",showIcon:!0,afterClose:function(){return e.setState(function(){return{successTextAlert:""}})}})))}},{key:"goToNew",value:function(){this.setState(function(){return{fuckts:H,currentMapIndex:1}}),C.replace("/fuckts/new")}},{key:"goToMap",value:function(e,t){this.setState(function(){return{currentMapIndex:t}}),C.replace("/fuckts/".concat(e))}},{key:"handleUpdateFucktValue",value:function(e){this.setState(function(){return{fucktValue:e}})}},{key:"handleCreateFuckt",value:function(e){var t=this.state.fuckts;t.push(W(e)),this.setState(function(){return{fuckts:t,fucktValue:""}})}},{key:"handleCahngeFuckt",value:function(e,t){var a=this.state.fuckts,n=a.findIndex(function(e){return e.id===t.id});a[n].text=e,this.setState(function(){return{fuckts:a}})}},{key:"handleCloseFuckt",value:function(e){var t=this.state.fuckts,a=t.findIndex(function(t){return t.id===e.id});t[a].deleted=!0,this.setState(function(){return{fuckts:t}})}},{key:"handleClickDragFuckt",value:function(e){var t=this.state.fuckts,a=t.findIndex(function(t){return t.id===e.id});t[a].zIndex=Math.max.apply(null,t.map(function(e){return e.zIndex||0}))+1,this.setState(function(){return{fuckts:t}})}},{key:"handleUpdateFucktCoordsFromStart",value:function(e){this.movedFuckt=e.currentTarget}},{key:"handleUpdateFucktCoords",value:function(e,t){var a=Object(c.findDOMNode)(this.movedFuckt);if(a){var n=a.style.transform.replace("translate(","").replace(")","").replace("px,","").replace("px","").split(" "),r=Object(O.a)(n,2),o=r[0],l=r[1],u=this.state.fuckts,i=u.findIndex(function(e){return e.id===t.id});u[i].pos={x:+o,y:+l},this.setState(function(){return{fuckts:u}})}}},{key:"triggerDeleteMap",value:function(){var e=this,t=this.props.match,a=(t=void 0===t?{}:t).params,n=(a=void 0===a?{}:a).pov;if("new"!==n){var r=JSON.parse(localStorage.getItem("".concat("FUCKT_MAP_KEY_").concat(n))||"{}");z({title:"\u0425\u043e\u0447\u0435\u0448\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443 '".concat(r.name,"'?"),content:"\u0415\u0451 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435\u043b\u044c\u0437\u044f \u0431\u0443\u0434\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",okText:"\u0414\u0430, \u0434\u0430\u0432\u0430\u0439",okType:"danger",cancelText:"\u041e\u0439, \u043d\u0435\u0442!",onOk:function(){var t=JSON.parse(localStorage.getItem("FUCKT_MAP_NAMES")||"[]"),a=t.indexOf(n);t.splice(a,1),localStorage.setItem("FUCKT_MAP_NAMES",JSON.stringify(t)),localStorage.setItem("".concat("FUCKT_MAP_KEY_").concat(n),""),e.goToNew()}})}}},{key:"triggerSaveMap",value:function(){var e=this.props.match,t=(e=void 0===e?{}:e).params,a=(t=void 0===t?{}:t).pov;if("new"!==a)return this.handleSaveMapOk(a);this.setState(function(){return{saveMapModalIsVisible:!0}})}},{key:"toggleSaveMap",value:function(){var e=this.state.saveMapModalIsVisible;this.setState(function(){return{saveMapModalIsVisible:!e}})}},{key:"handleSaveMapOk",value:function(e){var t=this,a=this.state,n=a.mapSaveName,r=void 0===n?e:n,c=a.fuckts,o=r.replace(/\s/g,"_"),l=JSON.parse(localStorage.getItem("FUCKT_MAP_NAMES")||"[]");-1===l.indexOf(o)&&l.push(o),localStorage.setItem("FUCKT_MAP_NAMES",JSON.stringify(l)),localStorage.setItem("".concat("FUCKT_MAP_KEY_").concat(o),JSON.stringify({id:Date.now()+B++,name:r,mapSaveNameFormatted:o,fuckts:c})),this.setState(function(){return{mapSaveName:void 0,saveMapModalIsVisible:!1,successTextAlert:"\u041a\u0430\u0440\u0442\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"}}),setTimeout(function(){return t.setState(function(){return{successTextAlert:""}})},5e3),e||C.replace("/fuckts/".concat(o))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.match,n=(a=void 0===a?{}:a).params,r=(n=void 0===n?{}:n).pov;if(t.saveMapModalIsVisible)return null;var c=JSON.parse(localStorage.getItem("FUCKT_MAP_NAMES")||"[]").map(function(e){return JSON.parse(localStorage.getItem("".concat("FUCKT_MAP_KEY_").concat(e))||"{}")});if("new"===r&&"new"!==t.pov)return{pov:r,fuckts:H.map(function(e){return e.id=Date.now()+B++,e}),allFucktMaps:c};if(t.pov!==r){var o=JSON.parse(localStorage.getItem("".concat("FUCKT_MAP_KEY_").concat(r))||"{}"),l=o.fuckts,u=c.findIndex(function(e){return e.id===o.id})+3;return{pov:r,allFucktMaps:c,currentMapIndex:u,fuckts:l&&l.length?l.map(function(e){return e.defaultPosition=e.pos,e}):[]}}return null}}]),t}(r.a.Component),R=function(){return r.a.createElement(b.a,null,r.a.createElement(F.a,{path:"/fuckts/:pov",component:L}),r.a.createElement(x.a,{from:"/",to:"/fuckts/new"}),r.a.createElement(x.a,{from:"*",to:"/"}))},$=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(i.a)(this,Object(s.a)(t).call(this,e)),C.listen(function(e,t){console.log(e)}),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(f.a,{history:C},r.a.createElement(R,null)))}}]),t}(n.Component),q=Object(d.b)()($);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(d.a,{store:E},r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[120,1,2]]]);
//# sourceMappingURL=main.f4a46e8b.chunk.js.map